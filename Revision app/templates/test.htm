<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <title>Test</title>
</head>
<style>
    body {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        color: white;
        background: radial-gradient(ellipse at bottom, #0d1d31 0%, #0c0d13 100%);
        overflow: hidden;
    }
    
    h1 {
        font-size: 78px;
        width: 60vw;
    }
    
    th {
        font-size: 20px;
    }
    
    tr {
        margin: 5px;
    }
</style>

<body>
    <h1>The subject that you have studied:</h1>
    <table style="width:10%">
        <tr>
            <th>Subject</th>
        </tr>
        {%for i in range(length)%}
        <tr>
            <td id="{{i}}">{{tests[i]}}</td>
            <td><button class="btn btn-success" onclick="elimate({{i}})">Finish!</button></td>
        </tr>
        {%endfor%}
    </table>
    <button id='leave' type='button' class="btn btn-danger" onclick="save()">Leave</button>

    <form method="POST" style="display: none;">
        <input type='text' id='finishedSubject' name="finishedSubject">
        <button id='save' type='submit' class="btn btn-danger">Leave</button>
    </form>
</body>

<script>
    var finished = []

    function elimate(i) {
        var subject = document.getElementById(i).innerText;
        document.getElementById(i).style.display = 'none';
        finished.push(subject)
        console.log(finished)
    }

    window.onbeforeunload = function() {
        save()
    };

    function save() {
        document.getElementById('finishedSubject').value = finished;
        document.getElementById('save').click();
    };
</script>

</html>